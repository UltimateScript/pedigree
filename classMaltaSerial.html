<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The Pedigree Project: MaltaSerial Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Pedigree Project
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classMaltaSerial-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MaltaSerial Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html">Serial.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for MaltaSerial:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classMaltaSerial__inherit__graph.png" border="0" usemap="#MaltaSerial_inherit__map" alt="Inheritance graph"/></div>
<map name="MaltaSerial_inherit__map" id="MaltaSerial_inherit__map">
<area shape="rect" id="node2" href="classSerial.html" title="{Serial\n||+ ~Serial()\l+ setBase()\l+ read()\l+ readNonBlock()\l+ write()\l+ write()\l}" alt="" coords="5,5,129,156"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for MaltaSerial:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classMaltaSerial__coll__graph.png" border="0" usemap="#MaltaSerial_coll__map" alt="Collaboration graph"/></div>
<map name="MaltaSerial_coll__map" id="MaltaSerial_coll__map">
<area shape="rect" id="node2" href="classSerial.html" title="{Serial\n||+ ~Serial()\l+ setBase()\l+ read()\l+ readNonBlock()\l+ write()\l+ write()\l}" alt="" coords="5,20,129,171"/>
<area shape="rect" id="node3" href="structMaltaSerial_1_1serial.html" title="{MaltaSerial::serial\n|+ rxtx\l+ inten\l+ iififo\l+ lctrl\l+ mctrl\l+ lstat\l+ mstat\l+ scratch\l|}" alt="" coords="153,5,280,185"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMaltaSerial_1_1serial.html">serial</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5c1b52588449645414636801c6ff4b95"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaltaSerial.html#a5c1b52588449645414636801c6ff4b95">MaltaSerial</a> ()</td></tr>
<tr class="separator:a5c1b52588449645414636801c6ff4b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23917a85199eb896952cd8a613b2151b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaltaSerial.html#a23917a85199eb896952cd8a613b2151b">~MaltaSerial</a> ()</td></tr>
<tr class="separator:a23917a85199eb896952cd8a613b2151b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39e776cfa409f324017e74777462447a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaltaSerial.html#a39e776cfa409f324017e74777462447a">setBase</a> (uintptr_t nBaseAddr)</td></tr>
<tr class="separator:a39e776cfa409f324017e74777462447a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67e4db6c88544c55a9d514e2c37e94c9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaltaSerial.html#a67e4db6c88544c55a9d514e2c37e94c9">write</a> (char c)</td></tr>
<tr class="separator:a67e4db6c88544c55a9d514e2c37e94c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8c48876ba2458fca4cdaaf8504ad5b6"><td class="memItemLeft" align="right" valign="top">virtual char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaltaSerial.html#ac8c48876ba2458fca4cdaaf8504ad5b6">read</a> ()</td></tr>
<tr class="separator:ac8c48876ba2458fca4cdaaf8504ad5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0b2ec14b15c4ded88d67acd6e13360f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0b2ec14b15c4ded88d67acd6e13360f"></a>
virtual char&#160;</td><td class="memItemRight" valign="bottom"><b>readNonBlock</b> ()</td></tr>
<tr class="separator:ad0b2ec14b15c4ded88d67acd6e13360f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classSerial"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classSerial')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classSerial.html">Serial</a></td></tr>
<tr class="memitem:a383e5ccc26c646bd5282b46c0b75dbe8 inherit pub_methods_classSerial"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a383e5ccc26c646bd5282b46c0b75dbe8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>write</b> (const char *c)</td></tr>
<tr class="separator:a383e5ccc26c646bd5282b46c0b75dbe8 inherit pub_methods_classSerial"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a1209dc5427a82217541f92a02756f75e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1209dc5427a82217541f92a02756f75e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>MaltaSerial</b> (const <a class="el" href="classMaltaSerial.html">MaltaSerial</a> &amp;)</td></tr>
<tr class="separator:a1209dc5427a82217541f92a02756f75e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dec677b39084f3363dd5dd5b8082e41"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4dec677b39084f3363dd5dd5b8082e41"></a>
<a class="el" href="classMaltaSerial.html">MaltaSerial</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classMaltaSerial.html">MaltaSerial</a> &amp;)</td></tr>
<tr class="separator:a4dec677b39084f3363dd5dd5b8082e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed68faed4d1ef06925520395ea4f27b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ed68faed4d1ef06925520395ea4f27b"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isConnected</b> ()</td></tr>
<tr class="separator:a6ed68faed4d1ef06925520395ea4f27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abb6712fefdd88e8560dc1d0bb4ca058f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb6712fefdd88e8560dc1d0bb4ca058f"></a>
struct <a class="el" href="structMaltaSerial_1_1serial.html">MaltaSerial::serial</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PACKED</b></td></tr>
<tr class="separator:abb6712fefdd88e8560dc1d0bb4ca058f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8606c4952fc09388d6717ccf26d4afc3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaltaSerial.html#a8606c4952fc09388d6717ccf26d4afc3">m_pBuffer</a></td></tr>
<tr class="separator:a8606c4952fc09388d6717ccf26d4afc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423ed842d46cb6c83ba9999351b18aaa"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="structMaltaSerial_1_1serial.html">serial</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaltaSerial.html#a423ed842d46cb6c83ba9999351b18aaa">m_pRegs</a></td></tr>
<tr class="separator:a423ed842d46cb6c83ba9999351b18aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements a driver for the <a class="el" href="classSerial.html">Serial</a> connection of the malta's UART.</p>
<p>Base for UART registers: 0x1F000900 Register offsets: RXTX: 0x00 Receive/Transmit char register. INTEN: 0x08 Interrupt enable register. IIFIFO: 0x10 Read: Interrupt identification, Write: FIFO control. LCTRL: 0x18 Line control register. MCTRL: 0x20 Modem control register. LSTAT: 0x28 Line status register. MSTAT: 0x30 Modem status register. SCRATCH: 0x38 Scratch register. </p>

<p>Definition at line <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html#l00041">41</a> of file <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html">kernel/machine/malta/Serial.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5c1b52588449645414636801c6ff4b95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaltaSerial::MaltaSerial </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default constructor, does nothing. </p>

<p>Definition at line <a class="el" href="malta_2Serial_8cc_source.html#l00025">25</a> of file <a class="el" href="malta_2Serial_8cc_source.html">malta/Serial.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a23917a85199eb896952cd8a613b2151b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaltaSerial::~MaltaSerial </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. </p>

<p>Definition at line <a class="el" href="malta_2Serial_8cc_source.html#l00029">29</a> of file <a class="el" href="malta_2Serial_8cc_source.html">malta/Serial.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac8c48876ba2458fca4cdaaf8504ad5b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char MaltaSerial::read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reads a character in from the serial port. </p><dl class="section note"><dt>Note</dt><dd>Blocking I/O. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on a non-printable character without a hardcoded VT100 string, the next character in the buffer otherwise. </dd></dl>

<p>Implements <a class="el" href="classSerial.html">Serial</a>.</p>

<p>Definition at line <a class="el" href="malta_2Serial_8cc_source.html#l00046">46</a> of file <a class="el" href="malta_2Serial_8cc_source.html">malta/Serial.cc</a>.</p>

<p>References <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html#l00095">m_pRegs</a>.</p>

</div>
</div>
<a class="anchor" id="a39e776cfa409f324017e74777462447a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MaltaSerial::setBase </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>nBaseAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000391">Todo:</a></b></dt><dd>make this generic for Mmaped and port IO. </dd></dl>

<p>Implements <a class="el" href="classSerial.html#a4fd060ab70af68728d44662ef8dce745">Serial</a>.</p>

<p>Definition at line <a class="el" href="malta_2Serial_8cc_source.html#l00033">33</a> of file <a class="el" href="malta_2Serial_8cc_source.html">malta/Serial.cc</a>.</p>

<p>References <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html#l00095">m_pRegs</a>.</p>

</div>
</div>
<a class="anchor" id="a67e4db6c88544c55a9d514e2c37e94c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MaltaSerial::write </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Writes a character out to the serial port. </p><dl class="section note"><dt>Note</dt><dd>Blocking I/O. </dd></dl>

<p>Implements <a class="el" href="classSerial.html">Serial</a>.</p>

<p>Definition at line <a class="el" href="malta_2Serial_8cc_source.html#l00039">39</a> of file <a class="el" href="malta_2Serial_8cc_source.html">malta/Serial.cc</a>.</p>

<p>References <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html#l00095">m_pRegs</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a8606c4952fc09388d6717ccf26d4afc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* MaltaSerial::m_pBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If we're returning a VT100 string (more than one char), this buffer pointer can be set to the current location in the string. If it is NULL, the next character is pulled from the port. </p>

<p>Definition at line <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html#l00090">90</a> of file <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html">kernel/machine/malta/Serial.h</a>.</p>

</div>
</div>
<a class="anchor" id="a423ed842d46cb6c83ba9999351b18aaa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="structMaltaSerial_1_1serial.html">serial</a>* MaltaSerial::m_pRegs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The serial device's registers. </p>

<p>Definition at line <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html#l00095">95</a> of file <a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html">kernel/machine/malta/Serial.h</a>.</p>

<p>Referenced by <a class="el" href="malta_2Serial_8cc_source.html#l00046">read()</a>, <a class="el" href="malta_2Serial_8cc_source.html#l00033">setBase()</a>, and <a class="el" href="malta_2Serial_8cc_source.html#l00039">write()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="kernel_2machine_2malta_2Serial_8h_source.html">kernel/machine/malta/Serial.h</a></li>
<li><a class="el" href="malta_2Serial_8cc_source.html">malta/Serial.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 24 2020 06:49:11 for The Pedigree Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
