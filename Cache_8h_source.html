<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The Pedigree Project: Cache.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Pedigree Project
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_d501334aeb1b78ad67cd3c72c37b1e87.html">system</a></li><li class="navelem"><a class="el" href="dir_0b81d7434f66459e3169837ff69ac3b6.html">include</a></li><li class="navelem"><a class="el" href="dir_0f4474b0ea685a6faa93e03a6bae666c.html">pedigree</a></li><li class="navelem"><a class="el" href="dir_eddbc328374415f5fbd37f0f4e26b07e.html">kernel</a></li><li class="navelem"><a class="el" href="dir_3b565324a0c1dfedb7cf30b31e5a11bf.html">utilities</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Cache.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2008-2014, Pedigree Developers</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Please see the CONTRIB file in the root of the source tree for a full</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * list of contributors.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Permission to use, copy, modify, and distribute this software for any</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * purpose with or without fee is hereby granted, provided that the above</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * copyright notice and this permission notice appear in all copies.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef CACHE_H</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define CACHE_H</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/Atomic.h&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/Spinlock.h&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/compiler.h&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/machine/TimerHandler.h&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/processor/state_forward.h&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/processor/types.h&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/utilities/BloomFilter.h&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/utilities/CacheConstants.h&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/utilities/List.h&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/utilities/MemoryAllocator.h&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/utilities/RequestQueue.h&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/utilities/Tree.h&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;pedigree/kernel/utilities/new&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">class </span><a class="code" href="classThread.html">Thread</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">class </span><a class="code" href="classUnlikelyLock.html">UnlikelyLock</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define CACHE_AGE_THRESHOLD 10</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define CACHE_NUM_THRESHOLD 2</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#define CACHE_WRITEBACK_PERIOD 500</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// Forward declaration of Cache so CacheManager can be defined first</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">class </span><a class="code" href="classCache.html">Cache</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classCacheManager.html">   55</a></span>&#160;<span class="keyword">class </span><a class="code" href="classCacheManager.html">CacheManager</a> :</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#ifndef STANDALONE_CACHE</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">public</span> <a class="code" href="classTimerHandler.html">TimerHandler</a>,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">public</span> <a class="code" href="classRequestQueue.html">RequestQueue</a></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classCacheManager.html">CacheManager</a>();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">virtual</span> ~<a class="code" href="classCacheManager.html">CacheManager</a>();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">static</span> <a class="code" href="classCacheManager.html">CacheManager</a> &amp;instance()</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> m_Instance;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCacheManager.html#a411b65fac6ab596f1b2359d7e0c59b6b">initialise</a>();</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">void</span> registerCache(<a class="code" href="classCache.html">Cache</a> *pCache);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">void</span> unregisterCache(<a class="code" href="classCache.html">Cache</a> *pCache);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCacheManager.html#abd085d7af59daa997fae94d20185a740">trimAll</a>(<span class="keywordtype">size_t</span> count = 1);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCacheManager.html#a16321c3e6a137252fccb60cb4a3bbcf0">timer</a>(uint64_t delta, InterruptState &amp;state);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#ifdef THREADS</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">void</span> trimThread();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">virtual</span> uint64_t <a class="code" href="classCacheManager.html#aee44abeaf9f1cf4f62c95485ee879844">executeRequest</a>(</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        uint64_t p1, uint64_t p2, uint64_t p3, uint64_t p4, uint64_t p5,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        uint64_t p6, uint64_t p7, uint64_t p8);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classCacheManager.html#a4a3e915418d3d4929cfdc2d36f819af1">  100</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classCacheManager.html#a4a3e915418d3d4929cfdc2d36f819af1">compareRequests</a>(<span class="keyword">const</span> <a class="code" href="classRequestQueue_1_1Request.html">Request</a> &amp;a, <span class="keyword">const</span> <a class="code" href="classRequestQueue_1_1Request.html">Request</a> &amp;b)</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">// p2 = CallbackCause, p3 = key in m_Pages</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">return</span> (a.p2 == b.p2) &amp;&amp; (a.p3 == b.p3);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">static</span> <a class="code" href="classCacheManager.html">CacheManager</a> m_Instance;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classList.html">List&lt;Cache *&gt;</a> m_Caches;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#ifdef THREADS</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="classThread.html">Thread</a> *m_pTrimThread;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">bool</span> m_bActive;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;};</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classCache.html">  118</a></span>&#160;<span class="keyword">class </span><a class="code" href="group__kernel.html#ga0a8474157ac6e484c737639d4b830f8b">EXPORTED_PUBLIC</a> <a class="code" href="classCache.html">Cache</a></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html">  121</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structCache_1_1CachePage.html">CachePage</a></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    {</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html#a9c9b953a284c66571dd2268b69b12e11">  124</a></span>&#160;        uintptr_t <a class="code" href="structCache_1_1CachePage.html#a9c9b953a284c66571dd2268b69b12e11">key</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html#ad559947aabcaf6f93b510d7fb4aed5cf">  127</a></span>&#160;        uintptr_t <a class="code" href="structCache_1_1CachePage.html#ad559947aabcaf6f93b510d7fb4aed5cf">location</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html#a5aa57bd8285eb784a66af33679070ea9">  131</a></span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="structCache_1_1CachePage.html#a5aa57bd8285eb784a66af33679070ea9">refcnt</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html#a2a99b1888ad266e9e677e2bec663d7fa">  134</a></span>&#160;        uint64_t checksum[2];</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html#a0608dc5e1c98f0d9d93444cb7638da70">  137</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="structCache_1_1CachePage.html#a0608dc5e1c98f0d9d93444cb7638da70">checksumChanging</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html#aedf2add93f0aafe7f9966b73c8cba75c">  140</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="structCache_1_1CachePage.html#aedf2add93f0aafe7f9966b73c8cba75c">Status</a></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment">// The page is being edited and should not be considered for any</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="comment">// writeback operation.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            Editing,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="comment">// The page has been marked as no longer being edited and should</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="comment">// only have a checksum calculated, but no writeback.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            EditTransition,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="comment">// The checksum is in flux.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            ChecksumChanging,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="comment">// The checksum was in flux but is now stable. A transition into</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="comment">// this state will trigger a writeback.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            ChecksumStable</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        } status;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structCache_1_1CachePage.html#aae6986e7e02a32478c5142bd5f218a9c">  156</a></span>&#160;        <a class="code" href="structCache_1_1CachePage.html">CachePage</a> *<a class="code" href="structCache_1_1CachePage.html#aae6986e7e02a32478c5142bd5f218a9c">pNext</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="structCache_1_1CachePage.html">CachePage</a> *pPrev;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordtype">bool</span> checkChecksum(uint64_t other[2]) <span class="keyword">const</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">bool</span> checkZeroChecksum() <span class="keyword">const</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    };</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classCache.html#aacb3a645b9380ddd06be3d6e0245428a">  177</a></span>&#160;    <span class="keyword">typedef</span> void (*writeback_t)(</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        CacheConstants::CallbackCause cause, uintptr_t loc, uintptr_t page,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordtype">void</span> *meta);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classCache.html">Cache</a>(<span class="keywordtype">size_t</span> pageConstraints = 0);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">virtual</span> ~<a class="code" href="classCache.html">Cache</a>();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">void</span> setCallback(writeback_t newCallback, <span class="keywordtype">void</span> *meta);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    uintptr_t lookup(uintptr_t key);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    uintptr_t insert(uintptr_t key, <span class="keywordtype">bool</span> *alreadyExisted = <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    uintptr_t</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    insert(uintptr_t key, <span class="keywordtype">size_t</span> size, <span class="keywordtype">bool</span> *alreadyExisted = <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">bool</span> exists(uintptr_t key, <span class="keywordtype">size_t</span> length);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">bool</span> evict(uintptr_t key);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">void</span> empty();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">void</span> release(uintptr_t key);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">bool</span> pin(uintptr_t key);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">size_t</span> trim(<span class="keywordtype">size_t</span> count = 1);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">void</span> sync(uintptr_t key, <span class="keywordtype">bool</span> async);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">void</span> triggerChecksum(uintptr_t key);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classCache.html#a63205a7e5c3bc8555e14a1cfd34856cd">  283</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCache.html#a63205a7e5c3bc8555e14a1cfd34856cd">startAtomic</a>()</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        m_bInCritical = 1;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classCache.html#a35700b0657aea9559dd88df1d6d326ce">  291</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCache.html#a35700b0657aea9559dd88df1d6d326ce">endAtomic</a>()</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        m_bInCritical = 0;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">void</span> markEditing(uintptr_t key, <span class="keywordtype">size_t</span> length = 0);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">void</span> markNoLongerEditing(uintptr_t key, <span class="keywordtype">size_t</span> length = 0);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">bool</span> map(uintptr_t virt) <span class="keyword">const</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordtype">bool</span> evict(uintptr_t key, <span class="keywordtype">bool</span> bLock, <span class="keywordtype">bool</span> bPhysicalLock, <span class="keywordtype">bool</span> bRemove);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordtype">size_t</span> lruEvict(<span class="keywordtype">bool</span> force = <span class="keyword">false</span>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordtype">void</span> linkPage(<a class="code" href="structCache_1_1CachePage.html">CachePage</a> *pPage);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordtype">void</span> promotePage(<a class="code" href="structCache_1_1CachePage.html">CachePage</a> *pPage);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">void</span> unlinkPage(<a class="code" href="structCache_1_1CachePage.html">CachePage</a> *pPage);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">void</span> calculateChecksum(<a class="code" href="structCache_1_1CachePage.html">CachePage</a> *pPage);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordtype">bool</span> verifyChecksum(<a class="code" href="structCache_1_1CachePage.html">CachePage</a> *pPage, <span class="keywordtype">bool</span> replace = <span class="keyword">false</span>);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">void</span> checksum(<span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> len, uint64_t out[2]);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="structCache_1_1callbackMeta.html">  361</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structCache_1_1callbackMeta.html">callbackMeta</a></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        CacheConstants::CallbackCause cause;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        writeback_t callback;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        uintptr_t loc;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        uintptr_t page;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordtype">void</span> *meta;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="classUnlikelyLock.html">UnlikelyLock</a> *cacheLock;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    };</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCacheManager.html#a16321c3e6a137252fccb60cb4a3bbcf0">timer</a>(uint64_t delta, InterruptState &amp;state);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">virtual</span> uint64_t <a class="code" href="classCacheManager.html#aee44abeaf9f1cf4f62c95485ee879844">executeRequest</a>(</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        uint64_t p1, uint64_t p2, uint64_t p3, uint64_t p4, uint64_t p5,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        uint64_t p6, uint64_t p7, uint64_t p8);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="classCache.html#ab1b7db14fa5e0b5c6beeadd3d1887172">  390</a></span>&#160;    <a class="code" href="classTree.html">Tree&lt;uintptr_t, CachePage *&gt;</a> <a class="code" href="classCache.html#ab1b7db14fa5e0b5c6beeadd3d1887172">m_Pages</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="classCache.html#a9a6db8399d5411119bc645d85b107912">  393</a></span>&#160;    <a class="code" href="classBloomFilter.html">BloomFilter&lt;uintptr_t&gt;</a> <a class="code" href="classCache.html#a9a6db8399d5411119bc645d85b107912">m_PageFilter</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="classCache.html#a9990597a441582e85d8bddaf5bcbbda3">  398</a></span>&#160;    <a class="code" href="structCache_1_1CachePage.html">CachePage</a> *<a class="code" href="classCache.html#a9990597a441582e85d8bddaf5bcbbda3">m_pLruHead</a>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="structCache_1_1CachePage.html">CachePage</a> *m_pLruTail;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="classCache.html#aa00cf09971efce081daf9849c8e02e47">  403</a></span>&#160;    <span class="keyword">static</span> <a class="code" href="classRangeList.html">MemoryAllocator</a> <a class="code" href="classCache.html#aa00cf09971efce081daf9849c8e02e47">m_Allocator</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="classCache.html#a20a40d549384db54b7270285b78805b3">  406</a></span>&#160;    <span class="keyword">static</span> <a class="code" href="classSpinlock.html">Spinlock</a> <a class="code" href="classCache.html#a20a40d549384db54b7270285b78805b3">m_AllocatorLock</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="classCache.html#ae1f69ced64606de12ef2c956fb1a6b81">  409</a></span>&#160;    <a class="code" href="classSpinlock.html">Spinlock</a> <a class="code" href="classCache.html#ae1f69ced64606de12ef2c956fb1a6b81">m_Lock</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="classCache.html#a58c82d2fa13015b57a37db5a275aa71f">  412</a></span>&#160;    writeback_t <a class="code" href="classCache.html#a58c82d2fa13015b57a37db5a275aa71f">m_Callback</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classCache.html#a4a2149bc3d104f0321742c437ef4403e">  416</a></span>&#160;    uint64_t <a class="code" href="classCache.html#a4a2149bc3d104f0321742c437ef4403e">m_Nanoseconds</a>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="classCache.html#afc58a498a96ed0b3edff877d2f4ecd8e">  419</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="classCache.html#afc58a498a96ed0b3edff877d2f4ecd8e">m_CallbackMeta</a>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="classCache.html#a9e2244ea992c61be51e6d6d6ddeac33d">  422</a></span>&#160;    <a class="code" href="classAtomic.html">Atomic&lt;size_t&gt;</a> <a class="code" href="classCache.html#a9e2244ea992c61be51e6d6d6ddeac33d">m_bInCritical</a>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="classCache.html#a8cd4872c514bd9aa6e3b95a50456f474">  425</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classCache.html#a8cd4872c514bd9aa6e3b95a50456f474">m_PageConstraints</a>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#ifdef STANDALONE_CACHE</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> discover_range(uintptr_t &amp;start, uintptr_t &amp;end);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;};</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classCachePageGuard.html">  439</a></span>&#160;<span class="keyword">class </span><a class="code" href="group__kernel.html#ga0a8474157ac6e484c737639d4b830f8b">EXPORTED_PUBLIC</a> <a class="code" href="classCachePageGuard.html">CachePageGuard</a></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="classCachePageGuard.html">CachePageGuard</a>(<a class="code" href="classCache.html">Cache</a> &amp;cache, uintptr_t location);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keyword">virtual</span> ~<a class="code" href="classCachePageGuard.html">CachePageGuard</a>();</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="classCache.html">Cache</a> &amp;m_Cache;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    uintptr_t m_Location;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;};</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classRequestQueue_html"><div class="ttname"><a href="classRequestQueue.html">RequestQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="RequestQueue_8h_source.html#l00041">RequestQueue.h:41</a></div></div>
<div class="ttc" id="classTimerHandler_html"><div class="ttname"><a href="classTimerHandler.html">TimerHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="TimerHandler_8h_source.html#l00032">TimerHandler.h:32</a></div></div>
<div class="ttc" id="structCache_1_1CachePage_html_a9c9b953a284c66571dd2268b69b12e11"><div class="ttname"><a href="structCache_1_1CachePage.html#a9c9b953a284c66571dd2268b69b12e11">Cache::CachePage::key</a></div><div class="ttdeci">uintptr_t key</div><div class="ttdoc">Key for this page. </div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00124">Cache.h:124</a></div></div>
<div class="ttc" id="group__kernel_html_ga0a8474157ac6e484c737639d4b830f8b"><div class="ttname"><a href="group__kernel.html#ga0a8474157ac6e484c737639d4b830f8b">EXPORTED_PUBLIC</a></div><div class="ttdeci">#define EXPORTED_PUBLIC</div><div class="ttdef"><b>Definition:</b> <a href="system_2include_2pedigree_2kernel_2compiler_8h_source.html#l00078">system/include/pedigree/kernel/compiler.h:78</a></div></div>
<div class="ttc" id="classAtomic_html"><div class="ttname"><a href="classAtomic.html">Atomic&lt; size_t &gt;</a></div></div>
<div class="ttc" id="classUnlikelyLock_html"><div class="ttname"><a href="classUnlikelyLock.html">UnlikelyLock</a></div><div class="ttdef"><b>Definition:</b> <a href="UnlikelyLock_8h_source.html#l00046">UnlikelyLock.h:46</a></div></div>
<div class="ttc" id="classCache_html_a9a6db8399d5411119bc645d85b107912"><div class="ttname"><a href="classCache.html#a9a6db8399d5411119bc645d85b107912">Cache::m_PageFilter</a></div><div class="ttdeci">BloomFilter&lt; uintptr_t &gt; m_PageFilter</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00393">Cache.h:393</a></div></div>
<div class="ttc" id="classCache_html_a20a40d549384db54b7270285b78805b3"><div class="ttname"><a href="classCache.html#a20a40d549384db54b7270285b78805b3">Cache::m_AllocatorLock</a></div><div class="ttdeci">static Spinlock m_AllocatorLock</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00406">Cache.h:406</a></div></div>
<div class="ttc" id="structCache_1_1CachePage_html_ad559947aabcaf6f93b510d7fb4aed5cf"><div class="ttname"><a href="structCache_1_1CachePage.html#ad559947aabcaf6f93b510d7fb4aed5cf">Cache::CachePage::location</a></div><div class="ttdeci">uintptr_t location</div><div class="ttdoc">The location of this page in memory. </div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00127">Cache.h:127</a></div></div>
<div class="ttc" id="structCache_1_1callbackMeta_html"><div class="ttname"><a href="structCache_1_1callbackMeta.html">Cache::callbackMeta</a></div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00361">Cache.h:361</a></div></div>
<div class="ttc" id="structCache_1_1CachePage_html_a0608dc5e1c98f0d9d93444cb7638da70"><div class="ttname"><a href="structCache_1_1CachePage.html#a0608dc5e1c98f0d9d93444cb7638da70">Cache::CachePage::checksumChanging</a></div><div class="ttdeci">bool checksumChanging</div><div class="ttdoc">Marker to check that a page&amp;#39;s contents are in flux. </div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00137">Cache.h:137</a></div></div>
<div class="ttc" id="classCache_html_a9990597a441582e85d8bddaf5bcbbda3"><div class="ttname"><a href="classCache.html#a9990597a441582e85d8bddaf5bcbbda3">Cache::m_pLruHead</a></div><div class="ttdeci">CachePage * m_pLruHead</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00398">Cache.h:398</a></div></div>
<div class="ttc" id="classRangeList_html"><div class="ttname"><a href="classRangeList.html">RangeList&lt; uintptr_t &gt;</a></div></div>
<div class="ttc" id="classCacheManager_html_abd085d7af59daa997fae94d20185a740"><div class="ttname"><a href="classCacheManager.html#abd085d7af59daa997fae94d20185a740">CacheManager::trimAll</a></div><div class="ttdeci">bool trimAll(size_t count=1)</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8cc_source.html#l00117">Cache.cc:117</a></div></div>
<div class="ttc" id="classCacheManager_html_a4a3e915418d3d4929cfdc2d36f819af1"><div class="ttname"><a href="classCacheManager.html#a4a3e915418d3d4929cfdc2d36f819af1">CacheManager::compareRequests</a></div><div class="ttdeci">virtual bool compareRequests(const Request &amp;a, const Request &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00100">Cache.h:100</a></div></div>
<div class="ttc" id="classCacheManager_html_a16321c3e6a137252fccb60cb4a3bbcf0"><div class="ttname"><a href="classCacheManager.html#a16321c3e6a137252fccb60cb4a3bbcf0">CacheManager::timer</a></div><div class="ttdeci">virtual void timer(uint64_t delta, InterruptState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8cc_source.html#l00131">Cache.cc:131</a></div></div>
<div class="ttc" id="classCache_html"><div class="ttname"><a href="classCache.html">Cache</a></div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00118">Cache.h:118</a></div></div>
<div class="ttc" id="classCache_html_a4a2149bc3d104f0321742c437ef4403e"><div class="ttname"><a href="classCache.html#a4a2149bc3d104f0321742c437ef4403e">Cache::m_Nanoseconds</a></div><div class="ttdeci">uint64_t m_Nanoseconds</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00416">Cache.h:416</a></div></div>
<div class="ttc" id="classSpinlock_html"><div class="ttname"><a href="classSpinlock.html">Spinlock</a></div><div class="ttdef"><b>Definition:</b> <a href="Spinlock_8h_source.html#l00027">Spinlock.h:27</a></div></div>
<div class="ttc" id="classList_html"><div class="ttname"><a href="classList.html">List&lt; Cache * &gt;</a></div></div>
<div class="ttc" id="classCacheManager_html_aee44abeaf9f1cf4f62c95485ee879844"><div class="ttname"><a href="classCacheManager.html#aee44abeaf9f1cf4f62c95485ee879844">CacheManager::executeRequest</a></div><div class="ttdeci">virtual uint64_t executeRequest(uint64_t p1, uint64_t p2, uint64_t p3, uint64_t p4, uint64_t p5, uint64_t p6, uint64_t p7, uint64_t p8)</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8cc_source.html#l00140">Cache.cc:140</a></div></div>
<div class="ttc" id="classCache_html_afc58a498a96ed0b3edff877d2f4ecd8e"><div class="ttname"><a href="classCache.html#afc58a498a96ed0b3edff877d2f4ecd8e">Cache::m_CallbackMeta</a></div><div class="ttdeci">void * m_CallbackMeta</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00419">Cache.h:419</a></div></div>
<div class="ttc" id="classCache_html_a8cd4872c514bd9aa6e3b95a50456f474"><div class="ttname"><a href="classCache.html#a8cd4872c514bd9aa6e3b95a50456f474">Cache::m_PageConstraints</a></div><div class="ttdeci">size_t m_PageConstraints</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00425">Cache.h:425</a></div></div>
<div class="ttc" id="structCache_1_1CachePage_html_aedf2add93f0aafe7f9966b73c8cba75c"><div class="ttname"><a href="structCache_1_1CachePage.html#aedf2add93f0aafe7f9966b73c8cba75c">Cache::CachePage::Status</a></div><div class="ttdeci">Status</div><div class="ttdoc">Current page status. </div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00140">Cache.h:140</a></div></div>
<div class="ttc" id="classTree_html"><div class="ttname"><a href="classTree.html">Tree</a></div><div class="ttdoc">A key/value dictionary. </div><div class="ttdef"><b>Definition:</b> <a href="Tree_8h_source.html#l00033">Tree.h:33</a></div></div>
<div class="ttc" id="classCache_html_aa00cf09971efce081daf9849c8e02e47"><div class="ttname"><a href="classCache.html#aa00cf09971efce081daf9849c8e02e47">Cache::m_Allocator</a></div><div class="ttdeci">static MemoryAllocator m_Allocator</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00403">Cache.h:403</a></div></div>
<div class="ttc" id="classCachePageGuard_html"><div class="ttname"><a href="classCachePageGuard.html">CachePageGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00439">Cache.h:439</a></div></div>
<div class="ttc" id="classCacheManager_html_a411b65fac6ab596f1b2359d7e0c59b6b"><div class="ttname"><a href="classCacheManager.html#a411b65fac6ab596f1b2359d7e0c59b6b">CacheManager::initialise</a></div><div class="ttdeci">void initialise()</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8cc_source.html#l00078">Cache.cc:78</a></div></div>
<div class="ttc" id="classCache_html_a58c82d2fa13015b57a37db5a275aa71f"><div class="ttname"><a href="classCache.html#a58c82d2fa13015b57a37db5a275aa71f">Cache::m_Callback</a></div><div class="ttdeci">writeback_t m_Callback</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00412">Cache.h:412</a></div></div>
<div class="ttc" id="structCache_1_1CachePage_html"><div class="ttname"><a href="structCache_1_1CachePage.html">Cache::CachePage</a></div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00121">Cache.h:121</a></div></div>
<div class="ttc" id="classCache_html_a35700b0657aea9559dd88df1d6d326ce"><div class="ttname"><a href="classCache.html#a35700b0657aea9559dd88df1d6d326ce">Cache::endAtomic</a></div><div class="ttdeci">void endAtomic()</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00291">Cache.h:291</a></div></div>
<div class="ttc" id="classBloomFilter_html"><div class="ttname"><a href="classBloomFilter.html">BloomFilter&lt; uintptr_t &gt;</a></div></div>
<div class="ttc" id="structCache_1_1CachePage_html_aae6986e7e02a32478c5142bd5f218a9c"><div class="ttname"><a href="structCache_1_1CachePage.html#aae6986e7e02a32478c5142bd5f218a9c">Cache::CachePage::pNext</a></div><div class="ttdeci">CachePage * pNext</div><div class="ttdoc">Linked list components for LRU. </div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00156">Cache.h:156</a></div></div>
<div class="ttc" id="classThread_html"><div class="ttname"><a href="classThread.html">Thread</a></div><div class="ttdef"><b>Definition:</b> <a href="Thread_8h_source.html#l00054">Thread.h:54</a></div></div>
<div class="ttc" id="classCacheManager_html"><div class="ttname"><a href="classCacheManager.html">CacheManager</a></div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00055">Cache.h:55</a></div></div>
<div class="ttc" id="classCache_html_ae1f69ced64606de12ef2c956fb1a6b81"><div class="ttname"><a href="classCache.html#ae1f69ced64606de12ef2c956fb1a6b81">Cache::m_Lock</a></div><div class="ttdeci">Spinlock m_Lock</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00409">Cache.h:409</a></div></div>
<div class="ttc" id="classCache_html_a63205a7e5c3bc8555e14a1cfd34856cd"><div class="ttname"><a href="classCache.html#a63205a7e5c3bc8555e14a1cfd34856cd">Cache::startAtomic</a></div><div class="ttdeci">void startAtomic()</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00283">Cache.h:283</a></div></div>
<div class="ttc" id="structCache_1_1CachePage_html_a5aa57bd8285eb784a66af33679070ea9"><div class="ttname"><a href="structCache_1_1CachePage.html#a5aa57bd8285eb784a66af33679070ea9">Cache::CachePage::refcnt</a></div><div class="ttdeci">size_t refcnt</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00131">Cache.h:131</a></div></div>
<div class="ttc" id="classRequestQueue_1_1Request_html"><div class="ttname"><a href="classRequestQueue_1_1Request.html">RequestQueue::Request</a></div><div class="ttdef"><b>Definition:</b> <a href="RequestQueue_8h_source.html#l00129">RequestQueue.h:129</a></div></div>
<div class="ttc" id="classCache_html_ab1b7db14fa5e0b5c6beeadd3d1887172"><div class="ttname"><a href="classCache.html#ab1b7db14fa5e0b5c6beeadd3d1887172">Cache::m_Pages</a></div><div class="ttdeci">Tree&lt; uintptr_t, CachePage * &gt; m_Pages</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00390">Cache.h:390</a></div></div>
<div class="ttc" id="classCache_html_a9e2244ea992c61be51e6d6d6ddeac33d"><div class="ttname"><a href="classCache.html#a9e2244ea992c61be51e6d6d6ddeac33d">Cache::m_bInCritical</a></div><div class="ttdeci">Atomic&lt; size_t &gt; m_bInCritical</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8h_source.html#l00422">Cache.h:422</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 24 2020 06:46:12 for The Pedigree Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
