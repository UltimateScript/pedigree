<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The Pedigree Project: X86Keyboard Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Pedigree Project
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classX86Keyboard-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">X86Keyboard Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="kernel_2machine_2mach__pc_2Keyboard_8h_source.html">Keyboard.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for X86Keyboard:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classX86Keyboard__inherit__graph.png" border="0" usemap="#X86Keyboard_inherit__map" alt="Inheritance graph"/></div>
<map name="X86Keyboard_inherit__map" id="X86Keyboard_inherit__map">
<area shape="rect" id="node2" href="classKeyboard.html" title="{Keyboard\n||+ Keyboard()\l+ ~Keyboard()\l+ initialise()\l+ setDebugState()\l+ getDebugState()\l+ getChar()\l+ getCharNonBlock()\l+ getLedState()\l+ setLedState()\l}" alt="" coords="22,5,167,200"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for X86Keyboard:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classX86Keyboard__coll__graph.png" border="0" usemap="#X86Keyboard_coll__map" alt="Collaboration graph"/></div>
<map name="X86Keyboard_coll__map" id="X86Keyboard_coll__map">
<area shape="rect" id="node2" href="classKeyboard.html" title="{Keyboard\n||+ Keyboard()\l+ ~Keyboard()\l+ initialise()\l+ setDebugState()\l+ getDebugState()\l+ getChar()\l+ getCharNonBlock()\l+ getLedState()\l+ setLedState()\l}" alt="" coords="1557,4318,1703,4513"/>
<area shape="rect" id="node3" href="classPs2Controller.html" title="{Ps2Controller\n|&#45; m_bHasSecondPort\l&#45; m_bFirstIrqEnabled\l&#45; m_bSecondIrqEnabled\l&#45; m_FirstIrqId\l&#45; m_SecondIrqId\l&#45; m_bDebugState\l&#45; m_ConfigByte\l&#45; m_bDebugStateFirstIrqEnabled\l&#45; m_bDebugStateSecondIrqEnabled\l|+ Ps2Controller()\l+ Ps2Controller()\l+ ~Ps2Controller()\l+ getName()\l+ dump()\l+ initialise()\l+ sendCommand()\l+ sendCommand()\l+ sendCommandWithResponse()\l+ sendCommandWithResponse()\land 10 more...\l&#45; irq()\l&#45; waitForReading()\l&#45; waitForWriting()\l}" alt="" coords="1727,4223,1957,4608"/>
<area shape="rect" id="node4" href="classController.html" title="{Controller\n||+ Controller()\l+ Controller()\l+ ~Controller()\l+ getType()\l+ getName()\l+ dump()\l}" alt="" coords="1721,3907,1827,4057"/>
<area shape="rect" id="node5" href="classDevice.html" title="{Device\n|# m_InterruptNumber\l# m_ClassCode\l# m_SubclassCode\l# m_VendorId\l# m_DeviceId\l# m_ProgInterface\l# m_PciBusPos\l# m_PciDevicePos\l# m_PciFunctionNum\l|+ Device()\l+ Device()\l+ ~Device()\l+ getParent()\l+ setParent()\l+ getName()\l+ getType()\l+ getSpecificType()\l+ setSpecificType()\l+ setPciPosition()\land 21 more...\l+ foreach()\l+ foreach()\l+ addToRoot()\l+ searchByVendorId()\l+ searchByVendorIdAndDeviceId()\l+ searchByClass()\l+ searchByClassAndSubclass()\l+ searchByClassSubclassAnd\lProgInterface()\l# NOT_COPYABLE_OR_ASSIGNABLE()\l# root()\l&#45; removeIoMappings()\l&#45; foreachInternal()\l&#45; foreachInternal()\l&#45; searchByVendorIdInternal()\l&#45; searchByVendorIdAndDevice\lIdInternal()\l&#45; searchByClassInternal()\l&#45; searchByClassAndSubclass\lInternal()\l&#45; searchByClassSubclassAnd\lProgInterfaceInternal()\l}" alt="" coords="1394,3092,1661,3756"/>
<area shape="rect" id="node7" href="classVector.html" title="{Vector\&lt; Device * \&gt;\n|&#45; m_Size\l&#45; m_Count\l&#45; m_Start\l&#45; m_ReserveFactor\l|+ Vector()\l+ Vector()\l+ Vector()\l+ ~Vector()\l+ operator=()\l+ operator[]()\l+ size()\l+ count()\l+ pushBack()\l+ popBack()\land 19 more...\l&#45; reserve()\l}" alt="" coords="1545,3841,1680,4123"/>
<area shape="rect" id="node6" href="classString.html" title="{String\n|&#45; m_Data\l&#45; m_ConstData\l&#45; m_Length\l&#45; m_Size\l&#45; m_Static\l&#45; m_HeapData\l&#45; m_Hash\l&#45; StaticSize\l|+ String()\l+ String()\l+ String()\l+ String()\l+ String()\l+ ~String()\l+ operator=()\l+ operator=()\l+ operator=()\l+ operator const char *()\land 37 more...\l+ Utf32ToUtf8()\l&#45; reserve()\l&#45; extract()\l&#45; computeHash()\l&#45; computeHash()\l&#45; move()\l&#45; iswhitespace()\l}" alt="" coords="1370,1817,1533,2247"/>
<area shape="rect" id="node27" href="classDevice_1_1Address.html" title="{Device::Address\n|+ m_Address\l+ m_Size\l+ m_IsIoSpace\l+ m_Padding\l&#45; m_bMapped\l|+ Address()\l+ ~Address()\l+ map()\l&#45; Address()\l&#45; operator=()\l}" alt="" coords="1452,2324,1571,2519"/>
<area shape="rect" id="node8" href="classVector.html" title="A vector / dynamic array. " alt="" coords="713,145,848,428"/>
<area shape="rect" id="node20" href="classVector.html" title="{Vector\&lt; _ListNode_t * \&gt;\n|&#45; m_Size\l&#45; m_Count\l&#45; m_Start\l&#45; m_ReserveFactor\l|+ Vector()\l+ Vector()\l+ Vector()\l+ ~Vector()\l+ operator=()\l+ operator[]()\l+ size()\l+ count()\l+ pushBack()\l+ popBack()\land 19 more...\l&#45; reserve()\l}" alt="" coords="683,957,846,1240"/>
<area shape="rect" id="node22" href="classVector.html" title="{Vector\&lt; T * \&gt;\n|&#45; m_Size\l&#45; m_Count\l&#45; m_Start\l&#45; m_ReserveFactor\l|+ Vector()\l+ Vector()\l+ Vector()\l+ ~Vector()\l+ operator=()\l+ operator[]()\l+ size()\l+ count()\l+ pushBack()\l+ popBack()\land 19 more...\l&#45; reserve()\l}" alt="" coords="567,583,701,865"/>
<area shape="rect" id="node26" href="classVector.html" title="{Vector\&lt; Device::Address * \&gt;\n|&#45; m_Size\l&#45; m_Count\l&#45; m_Start\l&#45; m_ReserveFactor\l|+ Vector()\l+ Vector()\l+ Vector()\l+ ~Vector()\l+ operator=()\l+ operator[]()\l+ size()\l+ count()\l+ pushBack()\l+ popBack()\land 19 more...\l&#45; reserve()\l}" alt="" coords="1423,2732,1613,3015"/>
<area shape="rect" id="node10" href="classMutex.html" title="{Mutex\n||+ Mutex()\l+ ~Mutex()\l}" alt="" coords="689,2827,776,2919"/>
<area shape="rect" id="node30" href="classBuffer.html" title="{Buffer\&lt; uint8_t \&gt;\n|&#45; m_BufferSize\l&#45; m_DataSize\l&#45; m_bCanRead\l&#45; m_bCanWrite\l&#45; m_SegmentSize\l|+ Buffer()\l+ ~Buffer()\l+ write()\l+ read()\l+ disableWrites()\l+ disableReads()\l+ enableWrites()\l+ enableReads()\l+ getDataSize()\l+ getSize()\land 8 more...\l&#45; WITHOUT_IMPLICIT_CONSTRUCTORS()\l&#45; notifyMonitors()\l&#45; addSegment()\l}" alt="" coords="656,3819,943,4145"/>
<area shape="rect" id="node35" href="classBuffer.html" title="{Buffer\&lt; T, allowShortOperation \&gt;\n|&#45; m_BufferSize\l&#45; m_DataSize\l&#45; m_bCanRead\l&#45; m_bCanWrite\l&#45; m_SegmentSize\l|+ Buffer()\l+ ~Buffer()\l+ write()\l+ read()\l+ disableWrites()\l+ disableReads()\l+ enableWrites()\l+ enableReads()\l+ getDataSize()\l+ getSize()\land 8 more...\l&#45; WITHOUT_IMPLICIT_CONSTRUCTORS()\l&#45; notifyMonitors()\l&#45; addSegment()\l}" alt="" coords="812,3261,1099,3587"/>
<area shape="rect" id="node11" href="classSemaphore.html" title="{Semaphore\n|&#45; magic\l&#45; m_bCanInterrupt\l|+ Semaphore()\l+ ~Semaphore()\l+ acquireWithResult()\l+ acquire()\l+ tryAcquire()\l+ release()\l+ getValue()\l&#45; Semaphore()\l&#45; operator=()\l&#45; removeThread()\l}" alt="" coords="163,2309,313,2533"/>
<area shape="rect" id="node12" href="classSpinlock.html" title="{Spinlock\n|+ allow_recursion\l&#45; m_bInterrupts\l&#45; m_Sentinel\l&#45; m_Magic\l&#45; m_MagicAlign\l&#45; m_pOwner\l&#45; m_Level\l&#45; m_OwnedProcessor\l&#45; m_Ra\l&#45; m_bAvoidTracking\l&#45; m_bOwned\l|+ Spinlock()\l+ Spinlock()\l+ acquire()\l+ exit()\l+ release()\l+ acquired()\l+ interrupts()\l&#45; unwind()\l&#45; trackRelease()\l}" alt="" coords="245,553,393,895"/>
<area shape="rect" id="node19" href="classObjectPool.html" title="{ObjectPool\&lt; _ListNode\l_t, 16 \&gt;\n||+ ObjectPool()\l+ ~ObjectPool()\l+ allocate()\l+ deallocate()\l}" alt="" coords="399,1567,557,1703"/>
<area shape="rect" id="node21" href="classObjectPool.html" title="{ObjectPool\&lt; T, poolSize \&gt;\n||+ ObjectPool()\l+ ~ObjectPool()\l+ allocate()\l+ deallocate()\l}" alt="" coords="483,1038,659,1159"/>
<area shape="rect" id="node24" href="classObjectPool.html" title="{ObjectPool\&lt; _ListNode\l_t, nodePoolSize \&gt;\n||+ ObjectPool()\l+ ~ObjectPool()\l+ allocate()\l+ deallocate()\l}" alt="" coords="538,1317,695,1453"/>
<area shape="rect" id="node32" href="classConditionVariable.html" title="{ConditionVariable\n||+ ConditionVariable()\l+ ~ConditionVariable()\l+ wait()\l+ wait()\l+ signal()\l+ broadcast()\l}" alt="" coords="635,2557,787,2708"/>
<area shape="rect" id="node13" href="classAtomic.html" title="{Atomic\&lt; uint64_t \&gt;\n||}" alt="" coords="253,248,386,325"/>
<area shape="rect" id="node14" href="classAtomic.html" title="{Atomic\&lt; T, bAllow \&gt;\n||}" alt="" coords="101,5,244,83"/>
<area shape="rect" id="node15" href="classAtomic.html" title="{Atomic\&lt; bool \&gt;\n||}" alt="" coords="117,248,228,325"/>
<area shape="rect" id="node16" href="classAtomic.html" title="{Atomic\&lt; ssize_t \&gt;\n||}" alt="" coords="5,452,135,529"/>
<area shape="rect" id="node17" href="classList.html" title="{List\&lt; class Thread * \&gt;\n|&#45; m_Count\l&#45; m_Magic\l|+ List()\l+ List()\l+ ~List()\l+ operator=()\l+ size()\l+ count()\l+ pushBack()\l+ pushBack()\l+ popBack()\l+ pushFront()\land 14 more...\l}" alt="" coords="427,1913,577,2151"/>
<area shape="rect" id="node18" href="struct__ListNode__t.html" title="One node in the list. " alt="" coords="921,678,1045,770"/>
<area shape="rect" id="node23" href="classList.html" title="{List\&lt; T, nodePoolSize \&gt;\n|&#45; m_Count\l&#45; m_Magic\l|+ List()\l+ List()\l+ ~List()\l+ operator=()\l+ size()\l+ count()\l+ pushBack()\l+ pushBack()\l+ popBack()\l+ pushFront()\land 14 more...\l}" alt="" coords="730,1516,893,1755"/>
<area shape="rect" id="node31" href="classList.html" title="{List\&lt; Buffer::Segment * \&gt;\n|&#45; m_Count\l&#45; m_Magic\l|+ List()\l+ List()\l+ ~List()\l+ operator=()\l+ size()\l+ count()\l+ pushBack()\l+ pushBack()\l+ popBack()\l+ pushFront()\land 14 more...\l}" alt="" coords="1175,1913,1346,2151"/>
<area shape="rect" id="node33" href="classList.html" title="{List\&lt; Thread * \&gt;\n|&#45; m_Count\l&#45; m_Magic\l|+ List()\l+ List()\l+ ~List()\l+ operator=()\l+ size()\l+ count()\l+ pushBack()\l+ pushBack()\l+ popBack()\l+ pushFront()\land 14 more...\l}" alt="" coords="985,1913,1101,2151"/>
<area shape="rect" id="node34" href="classList.html" title="{List\&lt; Buffer::MonitorTarget * \&gt;\n|&#45; m_Count\l&#45; m_Magic\l|+ List()\l+ List()\l+ ~List()\l+ operator=()\l+ size()\l+ count()\l+ pushBack()\l+ pushBack()\l+ popBack()\l+ pushFront()\land 14 more...\l}" alt="" coords="671,1913,869,2151"/>
<area shape="rect" id="node25" href="structPciBus_1_1ConfigSpace.html" title="{PciBus::ConfigSpace\n|+ vendor\l+ device\l+ command\l+ status\l+ revision\l+ progif\l+ subclass\l+ class_code\l+ cache_line_size\l+ latency_timer\land 13 more...\l|}" alt="" coords="1638,2761,1785,2985"/>
<area shape="rect" id="node28" href="classIoBase.html" title="Abstrace base class for hardware I/O capabilities. " alt="" coords="1647,1869,1784,2195"/>
<area shape="rect" id="node29" href="classIrqHandler.html" title="{IrqHandler\n||+ IrqHandler()\l+ irq()\l# ~IrqHandler()\l}" alt="" coords="1910,3929,2019,4035"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afe247bc9c3f8f2d07b99c73376976ba4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe247bc9c3f8f2d07b99c73376976ba4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>X86Keyboard</b> (<a class="el" href="classPs2Controller.html">Ps2Controller</a> *controller)</td></tr>
<tr class="separator:afe247bc9c3f8f2d07b99c73376976ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96962b8cee3805e08f7fefe361bd112b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a96962b8cee3805e08f7fefe361bd112b">initialise</a> ()</td></tr>
<tr class="memdesc:a96962b8cee3805e08f7fefe361bd112b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the device.  <a href="#a96962b8cee3805e08f7fefe361bd112b">More...</a><br /></td></tr>
<tr class="separator:a96962b8cee3805e08f7fefe361bd112b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba9d69572f523e94b14511db1142541"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a8ba9d69572f523e94b14511db1142541">setDebugState</a> (bool enableDebugState)</td></tr>
<tr class="separator:a8ba9d69572f523e94b14511db1142541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2b3797d55dca98a8612a90d4e2e17b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa2b3797d55dca98a8612a90d4e2e17b7"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>getDebugState</b> ()</td></tr>
<tr class="separator:aa2b3797d55dca98a8612a90d4e2e17b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af86af935e4519da318c3ec4530ef38dc"><td class="memItemLeft" align="right" valign="top">virtual char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#af86af935e4519da318c3ec4530ef38dc">getChar</a> ()</td></tr>
<tr class="separator:af86af935e4519da318c3ec4530ef38dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a986863a1b62d1ec3cb9d21031315fce0"><td class="memItemLeft" align="right" valign="top">virtual char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a986863a1b62d1ec3cb9d21031315fce0">getCharNonBlock</a> ()</td></tr>
<tr class="separator:a986863a1b62d1ec3cb9d21031315fce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6253b14f0f36c7d964bd72d133747f76"><td class="memItemLeft" align="right" valign="top">virtual char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a6253b14f0f36c7d964bd72d133747f76">getLedState</a> ()</td></tr>
<tr class="separator:a6253b14f0f36c7d964bd72d133747f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb114f4c9dd97405675f675ab4ce572e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#adb114f4c9dd97405675f675ab4ce572e">setLedState</a> (char state)</td></tr>
<tr class="separator:adb114f4c9dd97405675f675ab4ce572e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada698c4393aa77ff07b5e76af6b0a353"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ada698c4393aa77ff07b5e76af6b0a353"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>startReaderThread</b> ()</td></tr>
<tr class="separator:ada698c4393aa77ff07b5e76af6b0a353"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afe2b6bfd32a0458efb276ee8d2f7c703"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe2b6bfd32a0458efb276ee8d2f7c703"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>readerThread</b> () <a class="el" href="group__kernel.html#gaa1728270d73c5d1598de1fd691762eb1">NORETURN</a></td></tr>
<tr class="separator:afe2b6bfd32a0458efb276ee8d2f7c703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adca8b9b662fea2b85bfdaadbd7d3fa99"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adca8b9b662fea2b85bfdaadbd7d3fa99"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#adca8b9b662fea2b85bfdaadbd7d3fa99">scancodeToAscii</a> (uint8_t scancode)</td></tr>
<tr class="memdesc:adca8b9b662fea2b85bfdaadbd7d3fa99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a scancode into an ASCII character (for use in debug state) <br /></td></tr>
<tr class="separator:adca8b9b662fea2b85bfdaadbd7d3fa99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a7e560b01e326c795e12ecb0ce0931447"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e560b01e326c795e12ecb0ce0931447"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>readerThreadTrampoline</b> (void *) <a class="el" href="group__kernel.html#gaa1728270d73c5d1598de1fd691762eb1">NORETURN</a></td></tr>
<tr class="separator:a7e560b01e326c795e12ecb0ce0931447"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a616141cc5518b21778fb6c05b7379fb3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a616141cc5518b21778fb6c05b7379fb3"></a>
<a class="el" href="classPs2Controller.html">Ps2Controller</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a616141cc5518b21778fb6c05b7379fb3">m_pPs2Controller</a></td></tr>
<tr class="memdesc:a616141cc5518b21778fb6c05b7379fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parent PS/2 controller. <br /></td></tr>
<tr class="separator:a616141cc5518b21778fb6c05b7379fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bd4b767a7927649ac7d6e8552c94d8e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3bd4b767a7927649ac7d6e8552c94d8e"></a>
KeymapManager::EscapeState&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a3bd4b767a7927649ac7d6e8552c94d8e">m_Escape</a></td></tr>
<tr class="memdesc:a3bd4b767a7927649ac7d6e8552c94d8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current escape state. <br /></td></tr>
<tr class="separator:a3bd4b767a7927649ac7d6e8552c94d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3def1449dbe501ef765f75c4ff6955"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0b3def1449dbe501ef765f75c4ff6955"></a>
irq_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a0b3def1449dbe501ef765f75c4ff6955">m_IrqId</a></td></tr>
<tr class="memdesc:a0b3def1449dbe501ef765f75c4ff6955"><td class="mdescLeft">&#160;</td><td class="mdescRight">IRQ id. <br /></td></tr>
<tr class="separator:a0b3def1449dbe501ef765f75c4ff6955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ac9a807d9475dba2d9205f2d317e5b2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ac9a807d9475dba2d9205f2d317e5b2"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86Keyboard.html#a5ac9a807d9475dba2d9205f2d317e5b2">m_LedState</a></td></tr>
<tr class="memdesc:a5ac9a807d9475dba2d9205f2d317e5b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current LED state. <br /></td></tr>
<tr class="separator:a5ac9a807d9475dba2d9205f2d317e5b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classKeyboard"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classKeyboard')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classKeyboard.html">Keyboard</a></td></tr>
<tr class="memitem:aee12826936f4f22a3f70ae30fbd880a4 inherit pub_types_classKeyboard"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee12826936f4f22a3f70ae30fbd880a4"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>KeyFlags</b> { <br />
&#160;&#160;<b>Special</b> = 1ULL &lt;&lt; 63, 
<b>Ctrl</b> = 1ULL &lt;&lt; 62, 
<b>Shift</b> = 1ULL &lt;&lt; 61, 
<b>Alt</b> = 1ULL &lt;&lt; 60, 
<br />
&#160;&#160;<b>AltGr</b> = 1ULL &lt;&lt; 59, 
<b>Special</b> = 1ULL &lt;&lt; 63, 
<b>Ctrl</b> = 1ULL &lt;&lt; 62, 
<b>Shift</b> = 1ULL &lt;&lt; 61, 
<br />
&#160;&#160;<b>Alt</b> = 1ULL &lt;&lt; 60, 
<b>AltGr</b> = 1ULL &lt;&lt; 59
<br />
 }</td></tr>
<tr class="separator:aee12826936f4f22a3f70ae30fbd880a4 inherit pub_types_classKeyboard"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a997d0285a8ed289dbb3be8f851ca39c1 inherit pub_types_classKeyboard"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKeyboard.html#a997d0285a8ed289dbb3be8f851ca39c1">KeyboardLeds</a> { <br />
&#160;&#160;<a class="el" href="classKeyboard.html#a997d0285a8ed289dbb3be8f851ca39c1aca782bb53afd11102db336ed7363ce22">ScrollLock</a> = 1 &lt;&lt; 0, 
<a class="el" href="classKeyboard.html#a997d0285a8ed289dbb3be8f851ca39c1aa388a8bc480aa6199547a3f4aa3293bf">NumLock</a> = 1 &lt;&lt; 1, 
<a class="el" href="classKeyboard.html#a997d0285a8ed289dbb3be8f851ca39c1a0fcc26d1883fd6e683a3c37ea08ddabc">CapsLock</a> = 1 &lt;&lt; 2, 
<a class="el" href="classKeyboard.html#a997d0285a8ed289dbb3be8f851ca39c1a8085f901e94a92ec0177c3c5d1300ce1">Led1</a> = 1 &lt;&lt; 3, 
<br />
&#160;&#160;<b>Led2</b> = 1 &lt;&lt; 4, 
<b>Led3</b> = 1 &lt;&lt; 5, 
<b>Led4</b> = 1 &lt;&lt; 6, 
<b>Led5</b> = 1 &lt;&lt; 7
<br />
 }<tr class="memdesc:a997d0285a8ed289dbb3be8f851ca39c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit numbers follow the same format as the PS/2 keyboard LED byte.  <a href="classKeyboard.html#a997d0285a8ed289dbb3be8f851ca39c1">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a997d0285a8ed289dbb3be8f851ca39c1 inherit pub_types_classKeyboard"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee12826936f4f22a3f70ae30fbd880a4 inherit pub_types_classKeyboard"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee12826936f4f22a3f70ae30fbd880a4"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>KeyFlags</b> { <br />
&#160;&#160;<b>Special</b> = 1ULL &lt;&lt; 63, 
<b>Ctrl</b> = 1ULL &lt;&lt; 62, 
<b>Shift</b> = 1ULL &lt;&lt; 61, 
<b>Alt</b> = 1ULL &lt;&lt; 60, 
<br />
&#160;&#160;<b>AltGr</b> = 1ULL &lt;&lt; 59, 
<b>Special</b> = 1ULL &lt;&lt; 63, 
<b>Ctrl</b> = 1ULL &lt;&lt; 62, 
<b>Shift</b> = 1ULL &lt;&lt; 61, 
<br />
&#160;&#160;<b>Alt</b> = 1ULL &lt;&lt; 60, 
<b>AltGr</b> = 1ULL &lt;&lt; 59
<br />
 }</td></tr>
<tr class="separator:aee12826936f4f22a3f70ae30fbd880a4 inherit pub_types_classKeyboard"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classKeyboard.html">Keyboard</a> device implementation </p>

<p>Definition at line <a class="el" href="kernel_2machine_2mach__pc_2Keyboard_8h_source.html#l00036">36</a> of file <a class="el" href="kernel_2machine_2mach__pc_2Keyboard_8h_source.html">kernel/machine/mach_pc/Keyboard.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af86af935e4519da318c3ec4530ef38dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char X86Keyboard::getChar </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieves a character from the keyboard. Blocking I/O. If DebugState is false this returns zero. If DebugState is true this returns the next character received, or zero if the character is non-ASCII. </p>

<p>Implements <a class="el" href="classKeyboard.html#a38fd857bb7e3cd3d18a23cba0a3d3322">Keyboard</a>.</p>

<p>Definition at line <a class="el" href="mach__pc_2Keyboard_8cc_source.html#l00067">67</a> of file <a class="el" href="mach__pc_2Keyboard_8cc_source.html">mach_pc/Keyboard.cc</a>.</p>

<p>References <a class="el" href="Log_8h_source.html#l00082">ERROR</a>.</p>

<p>Referenced by <a class="el" href="ppc__common_2Keyboard_8cc_source.html#l00084">PPCKeyboard::getCharacter()</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classX86Keyboard_af86af935e4519da318c3ec4530ef38dc_icgraph.png" border="0" usemap="#classX86Keyboard_af86af935e4519da318c3ec4530ef38dc_icgraph" alt=""/></div>
<map name="classX86Keyboard_af86af935e4519da318c3ec4530ef38dc_icgraph" id="classX86Keyboard_af86af935e4519da318c3ec4530ef38dc_icgraph">
<area shape="rect" id="node2" href="classPPCKeyboard.html#a7a9adebbd8741f8e3ea6c66ecac1fc92" title="PPCKeyboard::getCharacter" alt="" coords="208,5,396,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a986863a1b62d1ec3cb9d21031315fce0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char X86Keyboard::getCharNonBlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieves a character from the keyboard. Non blocking I/O. If DebugState is false this returns zero. If DebugState is true this returns the next character received, or zero if the character is non-ASCII. </p>

<p>Implements <a class="el" href="classKeyboard.html#a3469023e3dbc9c15070fc1bc32f61956">Keyboard</a>.</p>

<p>Definition at line <a class="el" href="mach__pc_2Keyboard_8cc_source.html#l00082">82</a> of file <a class="el" href="mach__pc_2Keyboard_8cc_source.html">mach_pc/Keyboard.cc</a>.</p>

<p>References <a class="el" href="Log_8h_source.html#l00082">ERROR</a>.</p>

<p>Referenced by <a class="el" href="ppc__common_2Keyboard_8cc_source.html#l00095">PPCKeyboard::getCharacterNonBlock()</a>.</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classX86Keyboard_a986863a1b62d1ec3cb9d21031315fce0_icgraph.png" border="0" usemap="#classX86Keyboard_a986863a1b62d1ec3cb9d21031315fce0_icgraph" alt=""/></div>
<map name="classX86Keyboard_a986863a1b62d1ec3cb9d21031315fce0_icgraph" id="classX86Keyboard_a986863a1b62d1ec3cb9d21031315fce0_icgraph">
<area shape="rect" id="node2" href="classPPCKeyboard.html#a1d84ab9656a00e3c2da9d23fac65b4a2" title="PPCKeyboard::getCharacter\lNonBlock" alt="" coords="264,5,452,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6253b14f0f36c7d964bd72d133747f76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char X86Keyboard::getLedState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the current state of the LEDs on the keyboard. A single byte bitmap is returned with flags from KeyboardLeds identifying which LEDs are on or off. </p>

<p>Reimplemented from <a class="el" href="classKeyboard.html#afa3a1e3c9173e1cc84739dd3018cef4a">Keyboard</a>.</p>

<p>Definition at line <a class="el" href="mach__pc_2Keyboard_8cc_source.html#l00154">154</a> of file <a class="el" href="mach__pc_2Keyboard_8cc_source.html">mach_pc/Keyboard.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a96962b8cee3805e08f7fefe361bd112b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void X86Keyboard::initialise </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialises the device. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000540">Todo:</a></b></dt><dd>do we need to switch into a specific scancode set? </dd></dl>

<p>Implements <a class="el" href="classKeyboard.html#a89fa86b7d1f1d69a7ba18f3446398421">Keyboard</a>.</p>

<p>Definition at line <a class="el" href="mach__pc_2Keyboard_8cc_source.html#l00056">56</a> of file <a class="el" href="mach__pc_2Keyboard_8cc_source.html">mach_pc/Keyboard.cc</a>.</p>

<p>References <a class="el" href="Log_8h_source.html#l00136">Hex</a>, and <a class="el" href="Log_8h_source.html#l00074">NOTICE</a>.</p>

<p>Referenced by <a class="el" href="Pc_8cc_source.html#l00052">Pc::initialise()</a>.</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classX86Keyboard_a96962b8cee3805e08f7fefe361bd112b_icgraph.png" border="0" usemap="#classX86Keyboard_a96962b8cee3805e08f7fefe361bd112b_icgraph" alt=""/></div>
<map name="classX86Keyboard_a96962b8cee3805e08f7fefe361bd112b_icgraph" id="classX86Keyboard_a96962b8cee3805e08f7fefe361bd112b_icgraph">
<area shape="rect" id="node2" href="classPc.html#a097603724ea2cbabcc1874e9e8dce9dc" title="Pc::initialise" alt="" coords="208,5,301,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8ba9d69572f523e94b14511db1142541"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void X86Keyboard::setDebugState </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enableDebugState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the state of the device. When debugging, it is unwise to rely on interrupt- driven I/O, however in normal use polling is extremely slow and CPU-intensive.</p>
<p>The debugger therefore will set the device to "debug state" by calling this function with the argument "true". In "debug state", any buffered input will be discarded, the device's interrupt masked, and the device will rely on polling only. This will be the default state.</p>
<p>When the device is set to "normal state" by calling this function with the argument "false", interrupts may be used, along with buffered input, and it is recommended that during blocking I/O a <a class="el" href="classSemaphore.html">Semaphore</a> is used to signal incoming interrupts, so that the blocked thread may go to sleep. </p>

<p>Implements <a class="el" href="classKeyboard.html#ae09fd4dd28ea396413f4285d5c98a210">Keyboard</a>.</p>

<p>Definition at line <a class="el" href="mach__pc_2Keyboard_8cc_source.html#l00103">103</a> of file <a class="el" href="mach__pc_2Keyboard_8cc_source.html">mach_pc/Keyboard.cc</a>.</p>

</div>
</div>
<a class="anchor" id="adb114f4c9dd97405675f675ab4ce572e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void X86Keyboard::setLedState </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the current state of LEDs on the keyboard. If a keyboard does not have any LEDs this is essentially a no-op. </p>

<p>Reimplemented from <a class="el" href="classKeyboard.html#aac7dc2104e64da0328d1ab7e71efdfab">Keyboard</a>.</p>

<p>Definition at line <a class="el" href="mach__pc_2Keyboard_8cc_source.html#l00159">159</a> of file <a class="el" href="mach__pc_2Keyboard_8cc_source.html">mach_pc/Keyboard.cc</a>.</p>

<p>References <a class="el" href="include_2pedigree_2kernel_2machine_2Keyboard_8h_source.html#l00048">Keyboard::CapsLock</a>, <a class="el" href="KeymapManager_8cc_source.html#l00359">KeymapManager::convertPc102ScancodeToHidKeycode()</a>, <a class="el" href="Log_8h_source.html#l00069">DEBUG_LOG</a>, <a class="el" href="Thread_8cc_source.html#l00885">Thread::detach()</a>, <a class="el" href="Log_8h_source.html#l00082">ERROR</a>, <a class="el" href="Log_8h_source.html#l00089">FATAL</a>, <a class="el" href="Log_8h_source.html#l00136">Hex</a>, <a class="el" href="Processor_8cc_source.html#l00045">Processor::information()</a>, <a class="el" href="KeymapManager_8h_source.html#l00041">KeymapManager::instance()</a>, <a class="el" href="HidInputManager_8h_source.html#l00043">HidInputManager::instance()</a>, <a class="el" href="InputManager_8h_source.html#l00107">InputManager::instance()</a>, <a class="el" href="HidInputManager_8cc_source.html#l00039">HidInputManager::keyDown()</a>, <a class="el" href="HidInputManager_8cc_source.html#l00079">HidInputManager::keyUp()</a>, <a class="el" href="InputManager_8cc_source.html#l00129">InputManager::machineKeyUpdate()</a>, <a class="el" href="Log_8h_source.html#l00074">NOTICE</a>, <a class="el" href="include_2pedigree_2kernel_2machine_2Keyboard_8h_source.html#l00045">Keyboard::NumLock</a>, <a class="el" href="include_2pedigree_2kernel_2machine_2Keyboard_8h_source.html#l00042">Keyboard::ScrollLock</a>, <a class="el" href="Keyboard_8cc_source.html#l00030">Keyboard::setLedState()</a>, and <a class="el" href="Log_8h_source.html#l00078">WARNING</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="kernel_2machine_2mach__pc_2Keyboard_8h_source.html">kernel/machine/mach_pc/Keyboard.h</a></li>
<li><a class="el" href="mach__pc_2Keyboard_8cc_source.html">mach_pc/Keyboard.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 24 2020 06:49:14 for The Pedigree Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
